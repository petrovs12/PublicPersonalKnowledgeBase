{"pageProps":{"note":{"id":"6z7873y9gd71133qn0ykpwk","title":"Interop","desc":"","updated":1676281237798,"created":1676281032103,"custom":{},"fname":"science.cs.languages.Interop","type":"note","vault":{"fsPath":"vault"},"contentHash":"829b7cc5b557118c856b2e4314a59583","links":[],"anchors":{"thrift":{"type":"header","text":"Thrift","value":"thrift","line":7,"column":0,"depth":1}},"children":[],"parent":"Xd7EVNzA0l9SZgEOZtgdB","data":{}},"body":"<h1 id=\"interop\">Interop<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#interop\"></a></h1>\n<h1 id=\"thrift\">Thrift<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#thrift\"></a></h1>\n<p>Can use it to say define a service:</p>\n<pre><code>exception CustomException {\n  1: string message;\n}\n\nstruct AddResult {\n  1: i32 sum;\n}\n\nservice Calculator {\n  AddResult add(1:i32 a, 2:i32 b) throws (1:CustomException ex);\n}\n\n</code></pre>\n<p>then generate fome python sclenecton:</p>\n<pre><code>thrift --getn py cancleator.thrift\n</code></pre>\n<p>Then the python snippet willbe like so:</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> calculator<span class=\"token punctuation\">.</span>Calculator <span class=\"token keyword\">as</span> Calculator\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">CalculatorHandler</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> a <span class=\"token operator\">&#x3C;</span> <span class=\"token number\">0</span> <span class=\"token keyword\">or</span> b <span class=\"token operator\">&#x3C;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">raise</span> Calculator<span class=\"token punctuation\">.</span>CustomException<span class=\"token punctuation\">(</span><span class=\"token string\">\"Both numbers must be non-negative\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">return</span> Calculator<span class=\"token punctuation\">.</span>AddResult<span class=\"token punctuation\">(</span><span class=\"token builtin\">sum</span><span class=\"token operator\">=</span>a<span class=\"token operator\">+</span>b<span class=\"token punctuation\">)</span>\n\nhandler <span class=\"token operator\">=</span> CalculatorHandler<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nprocessor <span class=\"token operator\">=</span> Calculator<span class=\"token punctuation\">.</span>Processor<span class=\"token punctuation\">(</span>handler<span class=\"token punctuation\">)</span>\ntransport <span class=\"token operator\">=</span> TSocket<span class=\"token punctuation\">.</span>TServerSocket<span class=\"token punctuation\">(</span>port<span class=\"token operator\">=</span><span class=\"token number\">9090</span><span class=\"token punctuation\">)</span>\nserver <span class=\"token operator\">=</span> TServer<span class=\"token punctuation\">.</span>TSimpleServer<span class=\"token punctuation\">(</span>processor<span class=\"token punctuation\">,</span> transport<span class=\"token punctuation\">)</span>\nserver<span class=\"token punctuation\">.</span>serve<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n</code></pre>\n<p>And the clinent as so:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&#x3C;iostream></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&#x3C;thrift/transport/TBufferTransports.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&#x3C;thrift/protocol/TBinaryProtocol.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Calculator.h\"</span></span>\n\n<span class=\"token keyword\">using</span> <span class=\"token keyword\">namespace</span> apache<span class=\"token double-colon punctuation\">::</span>thrift<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> <span class=\"token keyword\">namespace</span> apache<span class=\"token double-colon punctuation\">::</span>thrift<span class=\"token double-colon punctuation\">::</span>protocol<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> <span class=\"token keyword\">namespace</span> apache<span class=\"token double-colon punctuation\">::</span>thrift<span class=\"token double-colon punctuation\">::</span>transport<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> <span class=\"token keyword\">namespace</span> <span class=\"token double-colon punctuation\">::</span>calculator<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    std<span class=\"token double-colon punctuation\">::</span>shared_ptr<span class=\"token operator\">&#x3C;</span>TTransport<span class=\"token operator\">></span> <span class=\"token function\">socket</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token function\">TSocket</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"localhost\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9090</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    std<span class=\"token double-colon punctuation\">::</span>shared_ptr<span class=\"token operator\">&#x3C;</span>TTransport<span class=\"token operator\">></span> <span class=\"token function\">transport</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token function\">TBufferedTransport</span><span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    std<span class=\"token double-colon punctuation\">::</span>shared_ptr<span class=\"token operator\">&#x3C;</span>TProtocol<span class=\"token operator\">></span> <span class=\"token function\">protocol</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token function\">TBinaryProtocol</span><span class=\"token punctuation\">(</span>transport<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    CalculatorClient <span class=\"token function\">client</span><span class=\"token punctuation\">(</span>protocol<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        AddResult result <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        std<span class=\"token double-colon punctuation\">::</span>cout <span class=\"token operator\">&#x3C;&#x3C;</span> <span class=\"token string\">\"3 + 4 = \"</span> <span class=\"token operator\">&#x3C;&#x3C;</span> result<span class=\"token punctuation\">.</span>sum <span class=\"token operator\">&#x3C;&#x3C;</span> std<span class=\"token double-colon punctuation\">::</span>endl<span class=\"token punctuation\">;</span>\n\n        client<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>CustomException<span class=\"token operator\">&#x26;</span> ex<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        std<span class=\"token double-colon punctuation\">::</span>cout <span class=\"token operator\">&#x3C;&#x3C;</span> <span class=\"token string\">\"Caught custom exception: \"</span> <span class=\"token operator\">&#x3C;&#x3C;</span> ex<span class=\"token punctuation\">.</span>message <span class=\"token operator\">&#x3C;&#x3C;</span> std<span class=\"token double-colon punctuation\">::</span>endl<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    transport<span class=\"token operator\">-></span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<p>Note the port above in the cpp code.\nEvene if this doesn't work great, iit should be representing the relationships between the components well enough.</p>","noteIndex":{"id":"wn8PE1RhG0znK1alrGFYv","title":"Root","desc":"","updated":1647507231129,"created":1631901573363,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"db285659ccac8b133c384de1ef51de66","links":[],"anchors":{"welcome-to-stefans-notes":{"type":"header","text":"Welcome to Stefan's Notes!","value":"welcome-to-stefans-notes","line":7,"column":0,"depth":1}},"children":["mxzxxu8z4e6krz99ht96y9d","W1EOZ27Tqx6RbiA2aW3DI","DyoLE2kwm9rRfRZhBGxPW","idhfogizmtcmvaamtalp3o3","4w8wBCSRvYUnGIZeozW03","vB321AipYCs6ldVC0APs9","h6WVdl1UTWVXeWuMJSZ1f","bth6m0exy9q9loxib1mc4al","4abAmH56ausbldEJbZokx","JyOFJ5NTPSVWMfiDy951X","0OO7fjCpcaGZg5qDRZr8z","138666663","pohXgII67dAxnoufG7yAP","6hs48bnjnaoxahk07exj74u","42r6290iqzLPmg9BY7fIp","3hoLerNJHjNkDziIKlFF2","T6meT3UNw0nRorEbzoPSl","hIOTXIIBj3vmhG1xc91lA","tnFlQuOAGPkbU2fZI7Cb1","Jb3w3f4x8kixLhrjUW6S1","LV6q5jlD2xtCF6yYFEqFC","ENDcCZFjAW9h66eDoFg7I","b5IeREnsTbeggC7rmWV0p","2hmbhdzcdljtdwln762gcrv","z9la6u9t3xueldj2omf2gc6","9akeo93l6b026jmu4t6e7pw","sc24o4jglr9jg29qr5v0e44","0mt5ao8tbbz3z5mdwe0aer8","r7rvb6nal69nfb6ogqdadnm","xujx5iuxskj10o0ajpi109n","lyl1rzqz6zwcswpwh0kafrm","skpw697vlqdq3t3uqxpq5e3","a4tts3oc3oms7wuralrbzdc","13a1ufqh6o8yi9evw1u5kv5"],"parent":null,"data":{},"body":"# Welcome to Stefan's Notes!\n\n        \n\nLast updated: 2021.12.30\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"enableUserTags":true,"enableHashTags":true,"dendronVersion":"0.95.0","enableEditorDecorations":true,"enableFullHierarchyNoteTitle":false,"templateHierarchy":"template"},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dendron","description":"Personal knowledge space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","assetsPrefix":"/PublicPersonalKnowledgeBase","siteUrl":"https://petrovs12.github.io","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"theme":"light","templateVersion":"0.97.0","siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}