{"pageProps":{"note":{"id":"QE1BddXlccbyYN1avaB4M","title":"Recommender Systems","desc":"","updated":1646306385716,"created":1642338149259,"custom":{},"fname":"engineering.system_design.ML System Design.Recommender Systems","type":"note","vault":{"fsPath":"vault"},"contentHash":"867c03ca23f74de54ec3802efb5eb3d3","links":[{"type":"wiki","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"science.math.Functional Analysis.High Dimensional Neighborhood Search","position":{"start":{"line":46,"column":1,"offset":959},"end":{"line":46,"column":74,"offset":1032},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"science.math.Functional Analysis.High Dimensional Neighborhood Search"}},{"type":"wiki","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"science.math.Functional Analysis.High Dimensional Neighborhood Search.Random Projections","position":{"start":{"line":47,"column":1,"offset":1033},"end":{"line":47,"column":93,"offset":1125},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"science.math.Functional Analysis.High Dimensional Neighborhood Search.Random Projections"}},{"type":"wiki","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"science.stats.Unsupervised Learning","position":{"start":{"line":140,"column":1,"offset":3318},"end":{"line":140,"column":40,"offset":3357},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"science.stats.Unsupervised Learning"}},{"type":"wiki","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"science.stats.Unsupervised Learning.KNN","position":{"start":{"line":141,"column":1,"offset":3359},"end":{"line":141,"column":44,"offset":3402},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"science.stats.Unsupervised Learning.KNN"}},{"type":"wiki","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"science.math.Optimization.Stochastic Gradient Descent","position":{"start":{"line":157,"column":1,"offset":3744},"end":{"line":157,"column":58,"offset":3801},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"science.math.Optimization.Stochastic Gradient Descent"}},{"type":"wiki","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"^item-item-similarity","position":{"start":{"line":179,"column":76,"offset":4554},"end":{"line":179,"column":101,"offset":4579},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"^item-item-similarity"}},{"type":"wiki","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"science.math.Optimization.Optimizers In in Neural Networks.Negative Sampling","position":{"start":{"line":216,"column":6,"offset":5365},"end":{"line":216,"column":86,"offset":5445},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"science.math.Optimization.Optimizers In in Neural Networks.Negative Sampling"}},{"type":"wiki","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"science.stats.Regression.Metrics:^ranking-start:^ranking-end","position":{"start":{"line":218,"column":1,"offset":5459},"end":{"line":218,"column":65,"offset":5523},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"science.stats.Regression.Metrics:^ranking-start:^ranking-end"}},{"type":"wiki","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"Philosophy and Rationality.Algorithmic Fairness","position":{"start":{"line":233,"column":1,"offset":5922},"end":{"line":233,"column":52,"offset":5973},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"Philosophy and Rationality.Algorithmic Fairness"}},{"type":"wiki","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"science.stats.Deep Neural Networks.Graph Neural Networks","position":{"start":{"line":251,"column":54,"offset":6444},"end":{"line":251,"column":114,"offset":6504},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"science.stats.Deep Neural Networks.Graph Neural Networks"}},{"type":"wiki","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"science.stats.Train Test Splitting","position":{"start":{"line":254,"column":1,"offset":6560},"end":{"line":254,"column":39,"offset":6598},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"science.stats.Train Test Splitting"}},{"type":"wiki","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"engineering.technologies.Message Queues","position":{"start":{"line":264,"column":38,"offset":6698},"end":{"line":264,"column":81,"offset":6741},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"engineering.technologies.Message Queues"}},{"type":"wiki","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"science.CS.algos.Data Structures.Bloom Filters","position":{"start":{"line":286,"column":1,"offset":7356},"end":{"line":286,"column":81,"offset":7436},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"science.CS.algos.Data Structures.Bloom Filters","anchorHeader":"use-in-recommendation-systems"}},{"type":"wiki","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"science.math.modelling.Operations Research.Facility Location","position":{"start":{"line":289,"column":25,"offset":7543},"end":{"line":289,"column":89,"offset":7607},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"science.math.modelling.Operations Research.Facility Location"}},{"type":"wiki","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"science.stats.Unsupervised Learning.Clustering","position":{"start":{"line":290,"column":1,"offset":7612},"end":{"line":290,"column":51,"offset":7662},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"science.stats.Unsupervised Learning.Clustering"}},{"type":"ref","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"science.stats.Regression.Recommender Systems","position":{"start":{"line":91,"column":1,"offset":2183},"end":{"line":91,"column":76,"offset":2258},"indent":[]},"xvault":false,"to":{"fname":"science.stats.Regression.Recommender Systems","anchorHeader":"^popularity-bias-implicit"}},{"type":"ref","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"science.stats.Regression.Loss Functions","position":{"start":{"line":96,"column":1,"offset":2273},"end":{"line":96,"column":60,"offset":2332},"indent":[]},"xvault":false,"to":{"fname":"science.stats.Regression.Loss Functions","anchorHeader":"^ranking-start"}},{"type":"ref","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"science.stats.Regression.Loss Functions","position":{"start":{"line":97,"column":1,"offset":2333},"end":{"line":97,"column":74,"offset":2406},"indent":[]},"xvault":false,"to":{"fname":"science.stats.Regression.Loss Functions","anchorHeader":"^ranking-start:#^ranking-end"}},{"type":"ref","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"science.stats.Regression.Recommender Systems","position":{"start":{"line":161,"column":9,"offset":3847},"end":{"line":161,"column":69,"offset":3907},"indent":[]},"xvault":false,"to":{"fname":"science.stats.Regression.Recommender Systems","anchorHeader":"^svd-loss2"}},{"type":"ref","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"Philosophy and Rationality.Algorithmic Fairness","position":{"start":{"line":236,"column":1,"offset":6006},"end":{"line":236,"column":75,"offset":6080},"indent":[]},"xvault":false,"to":{"fname":"Philosophy and Rationality.Algorithmic Fairness","anchorHeader":"^independence-formula"}},{"type":"ref","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"science.stats.Train Test Splitting","position":{"start":{"line":253,"column":1,"offset":6506},"end":{"line":253,"column":54,"offset":6559},"indent":[]},"xvault":false,"to":{"fname":"science.stats.Train Test Splitting","anchorHeader":"^recsys-start"}},{"type":"ref","from":{"fname":"engineering.system_design.ML System Design.Recommender Systems","id":"QE1BddXlccbyYN1avaB4M","vaultName":"vault"},"value":"Philosophy and Rationality.Algorithmic Privacy, Right to be Forgotten","position":{"start":{"line":297,"column":1,"offset":8110},"end":{"line":297,"column":92,"offset":8201},"indent":[]},"xvault":false,"to":{"fname":"Philosophy and Rationality.Algorithmic Privacy, Right to be Forgotten","anchorHeader":"^gdpr:#^gdpr-end"}},{"from":{"fname":"science.stats.AB Testing","id":"JClhWanv6nT58jkwQvo3o","vaultName":"vault"},"type":"backlink","position":{"start":{"line":71,"column":1,"offset":3084},"end":{"line":71,"column":67,"offset":3150},"indent":[]},"value":"engineering.system_design.ML System Design.Recommender Systems"},{"from":{"fname":"engineering.system_design.ML System Design.Youyube Video Recommendation","id":"GNXIZwCP8BdYPEsGMvUYO","vaultName":"vault"},"type":"backlink","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":67,"offset":67},"indent":[]},"value":"engineering.system_design.ML System Design.Recommender Systems"},{"from":{"fname":"science.stats.Unsupervised Learning.KNN","id":"x6WJBarY2rinq6LZVpoAE","vaultName":"vault"},"type":"backlink","position":{"start":{"line":4,"column":1,"offset":149},"end":{"line":4,"column":89,"offset":237},"indent":[]},"value":"engineering.system_design.ML System Design.Recommender Systems"},{"from":{"fname":"science.stats.Unsupervised Learning.KNN","id":"x6WJBarY2rinq6LZVpoAE","vaultName":"vault"},"type":"backlink","position":{"start":{"line":8,"column":1,"offset":300},"end":{"line":8,"column":67,"offset":366},"indent":[]},"value":"engineering.system_design.ML System Design.Recommender Systems"}],"anchors":{"why-recsys":{"type":"header","text":"Why Recsys?","value":"why-recsys","line":9,"column":0,"depth":1},"references":{"type":"header","text":"References","value":"references","line":15,"column":0,"depth":1},"requirements":{"type":"header","text":"Requirements","value":"requirements","line":19,"column":0,"depth":1},"functional":{"type":"header","text":"Functional","value":"functional","line":20,"column":0,"depth":2},"non-functional":{"type":"header","text":"Non-functional","value":"non-functional","line":27,"column":0,"depth":2},"system-overview":{"type":"header","text":"System Overview","value":"system-overview","line":32,"column":0,"depth":1},"scalability-concern-1":{"type":"header","text":"Scalability Concern 1","value":"scalability-concern-1","line":34,"column":0,"depth":2},"high-level-description-on-priorities-ml-approach-at-each-stage-above":{"type":"header","text":"High-level description on priorities/ ML approach at each stage above","value":"high-level-description-on-priorities-ml-approach-at-each-stage-above","line":45,"column":0,"depth":1},"first-pass":{"type":"header","text":"First Pass","value":"first-pass","line":46,"column":0,"depth":1},"second-pass":{"type":"header","text":"Second Pass","value":"second-pass","line":55,"column":0,"depth":1},"third-pass-re-ranking":{"type":"header","text":"Third pass re-Ranking","value":"third-pass-re-ranking","line":63,"column":0,"depth":1},"data":{"type":"header","text":"Data","value":"data","line":69,"column":0,"depth":1},"user-features":{"type":"header","text":"User features:","value":"user-features","line":71,"column":0,"depth":2},"item-features":{"type":"header","text":"Item features","value":"item-features","line":75,"column":0,"depth":2},"item-user-interaction":{"type":"header","text":"Item-user Interaction","value":"item-user-interaction","line":81,"column":0,"depth":1},"feature-engineering":{"type":"header","text":"Feature Engineering","value":"feature-engineering","line":87,"column":0,"depth":1},"implicit-and-explicit-signals-combining-them-implicit-explicit-signal":{"type":"header","text":"Implicit and Explicit Signals, combining them ^implicit-explicit signal","value":"implicit-and-explicit-signals-combining-them-implicit-explicit-signal","line":92,"column":0,"depth":2},"item-item-or-user-user-based-similarity-content-based-filtering":{"type":"header","text":"Item-item or user-user based similarity (content-based filtering)","value":"item-item-or-user-user-based-similarity-content-based-filtering","line":105,"column":0,"depth":1},"data-1":{"type":"header","text":"Data:","value":"data-1","line":106,"column":0,"depth":2},"item-user-based-similarity-collaborative-filtering":{"type":"header","text":"Item-user based similarity (collaborative filtering)","value":"item-user-based-similarity-collaborative-filtering","line":122,"column":0,"depth":1},"models":{"type":"header","text":"Models","value":"models","line":124,"column":0,"depth":1},"item-item-similarity":{"type":"header","text":"Item-Item Similarity","value":"item-item-similarity","line":125,"column":0,"depth":2},"algorithms":{"type":"header","text":"Algorithms","value":"algorithms","line":141,"column":0,"depth":1},"collaborative-filtering":{"type":"header","text":"Collaborative Filtering","value":"collaborative-filtering","line":150,"column":0,"depth":2},"item-user-embedding-collaborative-filtering":{"type":"header","text":"Item-User Embedding (Collaborative Filtering))","value":"item-user-embedding-collaborative-filtering","line":152,"column":0,"depth":2},"optimization-techniques":{"type":"header","text":"Optimization Techniques","value":"optimization-techniques","line":159,"column":0,"depth":2},"stochastic-gradient-descent":{"type":"header","text":"Stochastic Gradient Descent","value":"stochastic-gradient-descent","line":160,"column":0,"depth":3},"alternating-least-squares":{"type":"header","text":"Alternating Least Squares","value":"alternating-least-squares","line":165,"column":0,"depth":3},"cold-start-problem":{"type":"header","text":"Cold Start Problem","value":"cold-start-problem","line":177,"column":0,"depth":1},"new-item":{"type":"header","text":"New Item","value":"new-item","line":181,"column":0,"depth":2},"new-user":{"type":"header","text":"New User","value":"new-user","line":187,"column":0,"depth":2},"user-user-model-based-on-demographic-characteristics":{"type":"header","text":"User-user model, based on demographic characteristics","value":"user-user-model-based-on-demographic-characteristics","line":191,"column":0,"depth":3},"anonimous-users":{"type":"header","text":"Anonimous Users","value":"anonimous-users","line":193,"column":0,"depth":3},"no-collaborative-filtering":{"type":"header","text":"No collaborative filtering","value":"no-collaborative-filtering","line":197,"column":0,"depth":2},"intra-session-models":{"type":"header","text":"Intra-session models","value":"intra-session-models","line":202,"column":0,"depth":3},"but-in-fact-neighborhood-based-methods-are-not-much-worse-if-done-properly":{"type":"header","text":"But in fact neighborhood based Methods are not much worse if done properly","value":"but-in-fact-neighborhood-based-methods-are-not-much-worse-if-done-properly","line":227,"column":0,"depth":3},"representing-user-as-linear-combination-of-items":{"type":"header","text":"Representing user as linear combination of items","value":"representing-user-as-linear-combination-of-items","line":232,"column":0,"depth":2},"discrepency-between-business-goal-metric-and-within-optimizer-loss":{"type":"header","text":"Discrepency between 'business goal metric' and 'within-optimizer loss'","value":"discrepency-between-business-goal-metric-and-within-optimizer-loss","line":234,"column":0,"depth":1},"fairness":{"type":"header","text":"Fairness","value":"fairness","line":238,"column":0,"depth":1},"error-is-same-across-groups":{"type":"header","text":"Error is same across groups","value":"error-is-same-across-groups","line":240,"column":0,"depth":2},"keeping-track-and-serving-of-multiple-models-model-versions-abcd-testingrollbacks":{"type":"header","text":"Keeping Track and serving of multiple models, model versions, A/B/C/D... testing,rollbacks","value":"keeping-track-and-serving-of-multiple-models-model-versions-abcd-testingrollbacks","line":246,"column":0,"depth":1},"data-structure-for-multiple-models":{"type":"header","text":"Data Structure for multiple models","value":"data-structure-for-multiple-models","line":247,"column":0,"depth":2},"abcd-testing":{"type":"header","text":"A/B/C/D testing","value":"abcd-testing","line":249,"column":0,"depth":2},"model-rollback":{"type":"header","text":"Model Rollback","value":"model-rollback","line":251,"column":0,"depth":2},"train-test-set-splitting":{"type":"header","text":"Train-test set splitting","value":"train-test-set-splitting","line":255,"column":0,"depth":2},"moderation":{"type":"header","text":"Moderation","value":"moderation","line":264,"column":0,"depth":1},"remove":{"type":"header","text":"Remove","value":"remove","line":268,"column":0,"depth":2},"reduce":{"type":"header","text":"Reduce","value":"reduce","line":274,"column":0,"depth":2},"inform":{"type":"header","text":"Inform","value":"inform","line":280,"column":0,"depth":2},"quick-filtering-tricks":{"type":"header","text":"Quick Filtering Tricks","value":"quick-filtering-tricks","line":287,"column":0,"depth":1},"bloom-filters-for-deleting-forbidden-items":{"type":"header","text":"Bloom Filters for deleting forbidden Items","value":"bloom-filters-for-deleting-forbidden-items","line":291,"column":0,"depth":3},"exclusion-of-too-similar-items-from-same-newsfeed":{"type":"header","text":"Exclusion of 'too similar' items from same newsfeed","value":"exclusion-of-too-similar-items-from-same-newsfeed","line":294,"column":0,"depth":3},"privacy-and-gdpr":{"type":"header","text":"Privacy and GDPR","value":"privacy-and-gdpr","line":302,"column":0,"depth":1},"model-serving":{"type":"header","text":"Model Serving","value":"model-serving","line":306,"column":0,"depth":1},"future-directions":{"type":"header","text":"Future Directions","value":"future-directions","line":310,"column":0,"depth":1},"improved-rnns--cold-starts-and-session-models":{"type":"header","text":"Improved RNN's : cold starts and session models","value":"improved-rnns--cold-starts-and-session-models","line":312,"column":0,"depth":1},"curther-research-on-contextual-models-as-well-as-content-and-metadata":{"type":"header","text":"curther research on contextual models, as well as content and metadata.","value":"curther-research-on-contextual-models-as-well-as-content-and-metadata","line":314,"column":0,"depth":1},"combining-sequence-and-historical-data-long-and-short-term-behavior":{"type":"header","text":"Combining sequence and historical data (long and short term behavior)","value":"combining-sequence-and-historical-data-long-and-short-term-behavior","line":316,"column":0,"depth":1},"^candidate_generation":{"type":"block","value":"candidate_generation","line":46,"column":13},"^content-filtering":{"type":"block","value":"content-filtering","line":105,"column":68},"^collaborative-filtering":{"type":"block","value":"collaborative-filtering","line":150,"column":27},"^models":{"type":"block","value":"models","line":124,"column":9},"^item-item-similarity":{"type":"block","value":"item-item-similarity","line":125,"column":24},"^algorithms":{"type":"block","value":"algorithms","line":141,"column":13},"^collaborative-filtering-models":{"type":"block","value":"collaborative-filtering-models","line":152,"column":50},"^optimization-techniques":{"type":"block","value":"optimization-techniques","line":159,"column":27},"^sgd":{"type":"block","value":"sgd","line":160,"column":32},"^als":{"type":"block","value":"als","line":165,"column":30},"^fairness":{"type":"block","value":"fairness","line":238,"column":11},"^filters":{"type":"block","value":"filters","line":287,"column":26}},"children":[],"parent":"DndQcYSP0k8LoajaxpnX5","data":{}},"body":"<h1 id=\"recommender-systems\">Recommender Systems<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#recommender-systems\"></a></h1>\n<h1 id=\"why-recsys\">Why Recsys?<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#why-recsys\"></a></h1>\n<p>Item space, user space.\nVery high value to customer and commercial.\nItems can be other users too, i.e. tinder.</p>\n<h1 id=\"references\">References<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#references\"></a></h1>\n<p><a href=\"https://pdfs.semanticscholar.org/b474/56864177f79b0ef1b00ac923527aac256ffc.pdf\">Matrix Factorization Report</a>.</p>\n<h1 id=\"requirements\">Requirements<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#requirements\"></a></h1>\n<h2 id=\"functional\">Functional<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#functional\"></a></h2>\n<p> Enjoyable content\nIncreasing Revenue\nFairness (across demographic strata)\nFairness (across items)\nDiversity of content (serendipity)</p>\n<h2 id=\"non-functional\">Non-functional<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#non-functional\"></a></h2>\n<ul>\n<li>Availability</li>\n<li>Low latency</li>\n</ul>\n<h1 id=\"system-overview\">System Overview<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#system-overview\"></a></h1>\n<h2 id=\"scalability-concern-1\">Scalability Concern 1<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#scalability-concern-1\"></a></h2>\n<div class=\"mermaid\">\n  graph LR;\na[\"Corpus(10^9s)\"];\nb[\"Candidates(100's)\"]\nc[\"Top Candidates(10's)\"]\nd[\"Top Recommendations(ordered))\"]\n\na--scoring-->b--complex re-scoring-->c--ranking,selection-->d\n</div>\n<h1 id=\"high-level-description-on-priorities-ml-approach-at-each-stage-above\">High-level description on priorities/ ML approach at each stage above<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#high-level-description-on-priorities-ml-approach-at-each-stage-above\"></a></h1>\n<h1 id=\"first-pass-\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^candidate_generation\" href=\"#^candidate_generation\"></a>First Pass <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#first-pass-\"></a></h1>\n<p>To get from <strong>Corpus</strong> to <strong>Candidates</strong></p>\n<p>quick-ish models, fast collaborative filtering,etc.</p>\n<p>KNN w/ random projection or local hashing, etc.\n<a href=\"/PublicPersonalKnowledgeBase/notes/q6bc1dvnjytciisll1b9uh2\">High Dimensional Neighborhood Search</a>\n<a href=\"/PublicPersonalKnowledgeBase/notes/ohfk4ao5xo2zijxcchgutju\">Random Projections</a></p>\n<h1 id=\"second-pass\">Second Pass<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#second-pass\"></a></h1>\n<p>Bigger models, use everything possible, user activity etc.\n<a href=\"https://d2l.ai/chapter_recommender-systems/index.html\">possible recsys architectures</a>.</p>\n<p>All tricks about cold start, session models, etc also come here.</p>\n<h1 id=\"third-pass-re-ranking\">Third pass re-Ranking<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#third-pass-re-ranking\"></a></h1>\n<p>Add constraints (already seen this item, has clicked 'not interested' on similar, etc).\nAdd freshness, fairness, diversity.\nMaybe use some linear programming or other stuff to optimize something close to business objective.</p>\n<h1 id=\"data\">Data<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#data\"></a></h1>\n<h2 id=\"user-features\">User features:<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#user-features\"></a></h2>\n<p>login date, demographics</p>\n<h2 id=\"item-features\">Item features<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#item-features\"></a></h2>\n<p>Item content features- description, publisher, category, images, video snapshots. Tags, publisher tags,\ntags from image/video object detection algos, etc.</p>\n<h1 id=\"item-user-interaction\">Item-user Interaction<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#item-user-interaction\"></a></h1>\n<ul>\n<li>Rating</li>\n<li>Purchase</li>\n<li>Other stuff</li>\n</ul>\n<h1 id=\"feature-engineering\">Feature Engineering<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#feature-engineering\"></a></h1>\n<ul>\n<li>Normalization of ratings</li>\n</ul>\n<h2 id=\"implicit-and-explicit-signals-combining-them-implicit-explicit-signal\">Implicit and Explicit Signals, combining them ^implicit-explicit signal<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#implicit-and-explicit-signals-combining-them-implicit-explicit-signal\"></a></h2>\n<p>Summary:\nimplicit feedback based models seem better for ranking predictions, much richer, but if\nbasing only on implicit feedback, might have popularity bias.\n</p><p></p><div class=\"portal-container\">\n<div class=\"portal-head\">\n<div class=\"portal-backlink\">\n<div class=\"portal-title\">From <span class=\"portal-text-title\">Recommender Systems</span></div>\n<a href=\"/PublicPersonalKnowledgeBase/notes/VG6JMpj1Lic8br5iTSvIL\" class=\"portal-arrow\">Go to text <span class=\"right-arrow\">→</span></a>\n</div>\n</div>\n<div id=\"portal-parent-anchor\" class=\"portal-parent\" markdown=\"1\">\n<div class=\"portal-parent-fader-top\"></div>\n<div class=\"portal-parent-fader-bottom\"></div><ol>\n<li><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^popularity-bias-implicit\" href=\"#^popularity-bias-implicit\"></a>A problem for this might be that the 'head' of the implicit feedback might be biased towards popular items, it might lack serendipity, surprise, discovery, fairness etc. </li>\n</ol>\n</div></div><p></p><p></p>\n<p> Metrics</p>\n<ul>\n<li><p></p><div class=\"portal-container\">\n<div class=\"portal-head\">\n<div class=\"portal-backlink\">\n<div class=\"portal-title\">From <span class=\"portal-text-title\">Loss Functions</span></div>\n<a href=\"/PublicPersonalKnowledgeBase/notes/pBIMmRuN5zKHlVDIWn2wt\" class=\"portal-arrow\">Go to text <span class=\"right-arrow\">→</span></a>\n</div>\n</div>\n<div id=\"portal-parent-anchor\" class=\"portal-parent\" markdown=\"1\">\n<div class=\"portal-parent-fader-top\"></div>\n<div class=\"portal-parent-fader-bottom\"></div><h1 id=\"ranking-\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^ranking-start\" href=\"#^ranking-start\"></a>Ranking <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#ranking-\"></a></h1>\n</div></div><p></p>\n<p></p><div class=\"portal-container\">\n<div class=\"portal-head\">\n<div class=\"portal-backlink\">\n<div class=\"portal-title\">From <span class=\"portal-text-title\">Loss Functions</span></div>\n<a href=\"/PublicPersonalKnowledgeBase/notes/pBIMmRuN5zKHlVDIWn2wt\" class=\"portal-arrow\">Go to text <span class=\"right-arrow\">→</span></a>\n</div>\n</div>\n<div id=\"portal-parent-anchor\" class=\"portal-parent\" markdown=\"1\">\n<div class=\"portal-parent-fader-top\"></div>\n<div class=\"portal-parent-fader-bottom\"></div><h1 id=\"ranking--1\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^ranking-start\" href=\"#^ranking-start\"></a>Ranking <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#ranking--1\"></a></h1>\n<h2 id=\"types-\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^ranking-metrics\" href=\"#^ranking-metrics\"></a>Types <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#types-\"></a></h2>\n<ul>\n<li><strong>Point-wise models</strong>: which try to predict a (matching) score for each query-document pair in the dataset, and use it for ranking the items.</li>\n<li><strong>Pair-wise models</strong>: which try to learn a <strong>binary classifier</strong> that can tell which document is more relevant to a query, given pair of documents.</li>\n<li><strong>List-wise models</strong>: which try to directly optimize the value of one of the above evaluation measures, averaged over all queries in the training data.</li>\n</ul>\n<p><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^ranking-metrics\" href=\"#^ranking-metrics\"></a><a href=\"https://towardsdatascience.com/20-popular-machine-learning-metrics-part-2-ranking-statistical-metrics-22c3e5a937b6\">Some Medium Article</a> </p>\n<p><a title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\">#TODO- (Private)</a> learn some of these</p>\n<ul>\n<li>\n<p>Mean Reciprocal Rank (MRR)</p>\n<pre><code>For each user and each relevant item, compute \nthe mean precision of the list __trough__ that item\n\n</code></pre>\n</li>\n</ul>\n<h2 id=\"ranking--binary-relevance\">Ranking- Binary Relevance<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#ranking--binary-relevance\"></a></h2>\n<h3 id=\"mean-average-precision-\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^ranking-map\" href=\"#^ranking-map\"></a>Mean Average Precision <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#mean-average-precision-\"></a></h3>\n<p> Define 'precision trough k' to mean 'how many items until the <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mo>−</mo><mi>t</mi><mi>h</mi></mrow><annotation encoding=\"application/x-tex\">k-th</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">h</span></span></span></span></span> are relevant. The average of these is the Average Precision. The mean of that is the loss of the ranker.</p>\n<ol start=\"0\">\n<li>\n<p><strong>MAXIMIZE</strong></p>\n</li>\n<li>\n<p>For each query, compute <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>P</mi><mo stretchy=\"false\">(</mo><mi>q</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">AP(q)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mclose\">)</span></span></span></span></span> (average precision). To compute average precision, compute first <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>P</mi><mn>1</mn></msub><mo stretchy=\"false\">(</mo><mi>q</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>I</mi><mo stretchy=\"false\">(</mo><msub><mn>1</mn><mtext>user clicked on 1st result</mtext></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">P_1(q) = I(1_{\\text{user clicked on 1st result}})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">user clicked on 1st result</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span></p>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>P</mi><mi>k</mi></msub><mo stretchy=\"false\">(</mo><mi>q</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msub><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1..</mn><mi>k</mi></mrow></msub><mi>I</mi><mo stretchy=\"false\">(</mo><msub><mn>1</mn><mtext>user clicked on i-th result</mtext></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">P_k(q) =\\sum_{i=1..k} I(1_{\\text{user clicked on i-th result}})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0497em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1864em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1..</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">user clicked on i-th result</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span></p>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><msub><mi>P</mi><mi>k</mi></msub><mo stretchy=\"false\">(</mo><mi>q</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mrow><msub><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1..</mn><mi>k</mi></mrow></msub><msub><mi>P</mi><mi>k</mi></msub><mo stretchy=\"false\">(</mo><mi>q</mi><mo stretchy=\"false\">)</mo></mrow><mi>k</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">AP_k(q) =\\frac{\\sum_{i=1..k} P_k(q)}{k}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.405em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.06em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.535em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mop op-symbol small-op mtight\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1746em;\"><span style=\"top:-2.1786em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1..</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3214em;\"><span></span></span></span></span></span></span><span class=\"mspace mtight\" style=\"margin-right:0.1952em;\"></span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3488em;margin-left:-0.1389em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1512em;\"><span></span></span></span></span></span></span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">q</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n</li>\n<li>\n<p>The MAP is the mean of these for a given ranking algorithm.</p>\n</li>\n</ol>\n<h3 id=\"mean-reciprocal-rank-\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^ranking-mar\" href=\"#^ranking-mar\"></a>Mean Reciprocal Rank <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#mean-reciprocal-rank-\"></a></h3>\n<p>The 'performance' is <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">1/i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/</span><span class=\"mord mathnormal\">i</span></span></span></span></span>, where the highest option we click on is the <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span>-th one. Then the avg of that is MRR</p>\n<ol start=\"0\">\n<li><strong>MAXIMIZE</strong></li>\n<li>Say we produce <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span> options for a query, and the <strong>highest option</strong> (<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><mi>O</mi><mo stretchy=\"false\">(</mo><mi>q</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">HO(q)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mclose\">)</span></span></span></span></span>) the  user interacts with is the <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span>-th option. If they don't interact, assume <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><mi>O</mi><mo stretchy=\"false\">(</mo><mi>q</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>k</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">HO(q)=k+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span></li>\n<li><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>R</mi><msub><mi>R</mi><mi>r</mi></msub><mi>e</mi><mi>c</mi><mi>o</mi><mi>m</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>r</mi><mo>=</mo><mfrac><mrow><msub><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1..</mn><mi>Q</mi></mrow></msub><mfrac><mn>1</mn><mrow><mi>H</mi><mi>O</mi><mo stretchy=\"false\">(</mo><mi>q</mi><mo stretchy=\"false\">)</mo></mrow></mfrac></mrow><mi>Q</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">MRR_recommender =\\frac{\\sum_{i=1..Q}\\frac{1}{HO(q)}}{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">MR</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">eco</span><span class=\"mord mathnormal\">mm</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">er</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.7586em;vertical-align:-0.4811em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2775em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">Q</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.6865em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mop op-symbol small-op mtight\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1667em;\"><span style=\"top:-2.1786em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1..</span><span class=\"mord mathnormal mtight\">Q</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4603em;\"><span></span></span></span></span></span></span><span class=\"mspace mtight\" style=\"margin-right:0.1952em;\"></span><span class=\"mord mtight\"><span class=\"mopen nulldelimiter sizing reset-size3 size6\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8443em;\"><span style=\"top:-2.6408em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">q</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.2255em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line mtight\" style=\"border-bottom-width:0.049em;\"></span></span><span style=\"top:-3.384em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5378em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter sizing reset-size3 size6\"></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4811em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></li>\n</ol>\n<h2 id=\"ranking--beyond-binary-relevance\">Ranking- Beyond Binary Relevance<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#ranking--beyond-binary-relevance\"></a></h2>\n<p> Assume we know the relevances of the documents. Note- this can be used to differentiate signals in ads between look, click, put in basket, purchase, etc.\nSo for each document there is a 'relevance ground truth' <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mi>e</mi><msub><mi>l</mi><mi>d</mi></msub></mrow><annotation encoding=\"application/x-tex\">rel_d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\">re</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">d</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>.\nNow, let a query <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>q</mi></mrow><annotation encoding=\"application/x-tex\">q</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span></span></span></span></span> return the order <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>π</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>π</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo separator=\"true\">,</mo><msub><mi>π</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\pi_1,\\pi_2,...,\\pi_k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">...</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span></p>\n<h3 id=\"discounted-cumulative-gain-\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^DCG\" href=\"#^DCG\"></a>Discounted Cumulative Gain <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#discounted-cumulative-gain-\"></a></h3>\n<p>We discount things, lower on the list.\n<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>D</mi><mi>C</mi><msub><mi>G</mi><mi>p</mi></msub><mo>=</mo><mi>r</mi><mi>e</mi><msub><mi>l</mi><msub><mi>π</mi><mn>1</mn></msub></msub><mo>+</mo><mi>s</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>i</mi><mo>=</mo><mn>2..</mn><mi>k</mi></mrow></msub><mo stretchy=\"false\">(</mo><mi>r</mi><mi>e</mi><msub><mi>l</mi><msub><mi>π</mi><mi>i</mi></msub></msub><mi mathvariant=\"normal\">/</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo>+</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">DCG_p = rel_{\\pi_1}+sum_{i=2..k}(rel_{\\pi_i}/(1+log(i)))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9445em;vertical-align:-0.2501em;\"></span><span class=\"mord mathnormal\">re</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">π</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2501em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0001em;vertical-align:-0.2501em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">u</span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">2..</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">re</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">π</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2501em;\"><span></span></span></span></span></span></span><span class=\"mord\">/</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">i</span><span class=\"mclose\">)))</span></span></span></span></span>\nCan also use:</p>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>D</mi><mi>C</mi><msub><mi>G</mi><mrow><mo stretchy=\"false\">[</mo><mi>π</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>π</mi><mo stretchy=\"false\">(</mo><mn>2</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo stretchy=\"false\">]</mo></mrow></msub><mo>=</mo><mi>r</mi><mi>e</mi><msub><mi>l</mi><msub><mi>π</mi><mn>1</mn></msub></msub><mo>+</mo><mi>s</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>i</mi><mo>=</mo><mn>2..</mn><mi>k</mi></mrow></msub><mo stretchy=\"false\">(</mo><msup><mn>2</mn><mrow><mi>r</mi><mi>e</mi><msub><mi>l</mi><msub><mi>π</mi><mi>i</mi></msub></msub></mrow></msup><mi mathvariant=\"normal\">/</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo>+</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">DCG_{[\\pi(1),\\pi(2),...]} = rel_{\\pi_1}+sum_{i=2..k}(2^{rel_{\\pi_i}}/(1+log(i)))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0385em;vertical-align:-0.3552em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.5198em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">π</span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">)</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">π</span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">)</span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\">...</span><span class=\"mclose mtight\">]</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3552em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9445em;vertical-align:-0.2501em;\"></span><span class=\"mord mathnormal\">re</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">π</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2501em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1013em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">u</span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">2..</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8513em;\"><span style=\"top:-3.0652em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">re</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1645em;\"><span style=\"top:-2.357em;margin-left:-0.0197em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">π</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3448em;margin-left:-0.0359em;margin-right:0.1em;\"><span class=\"pstrut\" style=\"height:2.6595em;\"></span><span class=\"mord mathnormal mtight\">i</span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3147em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3678em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mord\">/</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">i</span><span class=\"mclose\">)))</span></span></span></span></span></p>\n<p>which puts very high emphasis on highly relevant documents.</p>\n<h2 id=\"normalized-discounted-cumulative-gain-\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^ranking-NDCG\" href=\"#^ranking-NDCG\"></a>Normalized Discounted Cumulative Gain <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#normalized-discounted-cumulative-gain-\"></a></h2>\n<p>normalize DCG by the ideal DCG.</p>\n<p>$ DCG_{best}(el_1,el_2,...) = DCG(sortDecsending([el_1,el_2,...])) $</p>\n<p>$ NDCG([e_1,e_2,...])= DCG([e_1,e_2,...])/DCG(sortDesc([e_1,e_2,...])) $</p>\n<h2 id=\"precision-at-k-pk\">Precision at K (\"p@K\").<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#precision-at-k-pk\"></a></h2>\n<p> Precision @ 1: if first item is relevant, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>P</mi><mn>1</mn></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">P_1=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span>, else 0.</p>\n<h2 id=\"what-if-no-relevant-results\">What if no relevant results<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#what-if-no-relevant-results\"></a></h2>\n<p>If user does more queries, then can find the reciprocal rank, MRR is the mean RR across multiple queries.</p>\n</div></div><p></p></li>\n</ul>\n<h1 id=\"item-item-or-user-user-based-similarity-content-based-filtering-\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^content-filtering\" href=\"#^content-filtering\"></a>Item-item or user-user based similarity (content-based filtering) <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#item-item-or-user-user-based-similarity-content-based-filtering-\"></a></h1>\n<h2 id=\"data-1\">Data:<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#data-1\"></a></h2>\n<p>Movie profile:</p>\n<ul>\n<li>Genre</li>\n<li>Producer</li>\n<li>Tags</li>\n<li>Description (word2vec,doc2vec)</li>\n<li>Images and video snapshots (maybe tagging based on that, maybe color pallet)</li>\n<li>Thumbnails\n<!-- * User search/interest history -->\n</li>\n</ul>\n<p>Maybe latent space of 'interests' that's common to not only this recsys, but\nthe search as well...</p>\n<h1 id=\"item-user-based-similarity-collaborative-filtering-\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^collaborative-filtering\" href=\"#^collaborative-filtering\"></a>Item-user based similarity (collaborative filtering) <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#item-user-based-similarity-collaborative-filtering-\"></a></h1>\n<h1 id=\"models-\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^models\" href=\"#^models\"></a>Models <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#models-\"></a></h1>\n<h2 id=\"item-item-similarity-\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^item-item-similarity\" href=\"#^item-item-similarity\"></a>Item-Item Similarity <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#item-item-similarity-\"></a></h2>\n<ul>\n<li>Item KNN</li>\n<li>Item Attr</li>\n<li>BPRMF</li>\n<li>ItemKNN</li>\n<li>Item Attribute KNN</li>\n<li>UserKNN</li>\n<li>User Attribute KNN</li>\n<li>Group-based (Clustering-based algorithm)</li>\n<li>Paco Recommender (Co-Clustering-based algorithm)</li>\n</ul>\n<h1 id=\"algorithms-\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^algorithms\" href=\"#^algorithms\"></a>Algorithms <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#algorithms-\"></a></h1>\n<p>For content filtering approaches:</p>\n<p>Clustering type things, manifold dimensionality reduction, etc. General unsupervised learning techniques.\n<a href=\"/PublicPersonalKnowledgeBase/notes/8IzHGF5RCHLCesjjpTqRU\">Unsupervised Learning</a>\n<a href=\"/PublicPersonalKnowledgeBase/notes/x6WJBarY2rinq6LZVpoAE\">KNN</a> </p>\n<h2 id=\"collaborative-filtering-\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^collaborative-filtering\" href=\"#^collaborative-filtering\"></a>Collaborative Filtering <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#collaborative-filtering-\"></a></h2>\n<h2 id=\"item-user-embedding-collaborative-filtering-\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^collaborative-filtering-models\" href=\"#^collaborative-filtering-models\"></a>Item-User Embedding (Collaborative Filtering)) <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#item-user-embedding-collaborative-filtering-\"></a></h2>\n<ul>\n<li>Matrix Factorization (with and without baseline)</li>\n<li>Non-negative Matrix Factorization</li>\n<li>SVD</li>\n<li>SVD++</li>\n<li>ItemKNN</li>\n</ul>\n<h2 id=\"optimization-techniques-\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^optimization-techniques\" href=\"#^optimization-techniques\"></a>Optimization Techniques <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#optimization-techniques-\"></a></h2>\n<h3 id=\"stochastic-gradient-descent-\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^sgd\" href=\"#^sgd\"></a>Stochastic Gradient Descent <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#stochastic-gradient-descent-\"></a></h3>\n<p><a href=\"/PublicPersonalKnowledgeBase/notes/DomemlJ4RaKuAJ3oCsuTN\">Stochastic Gradient Descent</a></p>\n<h3 id=\"alternating-least-squares-\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^als\" href=\"#^als\"></a>Alternating Least Squares <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#alternating-least-squares-\"></a></h3>\n<p>Note in </p><p></p><div class=\"portal-container\">\n<div class=\"portal-head\">\n<div class=\"portal-backlink\">\n<div class=\"portal-title\">From <span class=\"portal-text-title\">Recommender Systems</span></div>\n<a href=\"/PublicPersonalKnowledgeBase/notes/VG6JMpj1Lic8br5iTSvIL\" class=\"portal-arrow\">Go to text <span class=\"right-arrow\">→</span></a>\n</div>\n</div>\n<div id=\"portal-parent-anchor\" class=\"portal-parent\" markdown=\"1\">\n<div class=\"portal-parent-fader-top\"></div>\n<div class=\"portal-parent-fader-bottom\"></div><p><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^svd-loss2\" href=\"#^svd-loss2\"></a><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mi>i</mi><msub><mi>n</mi><mrow><mi>p</mi><mo separator=\"true\">,</mo><mi>q</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow></msub><msub><mi mathvariant=\"normal\">Σ</mi><mrow><mi>u</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub><mo stretchy=\"false\">(</mo><msub><mi>r</mi><mrow><mi>u</mi><mi>i</mi></mrow></msub><mo>−</mo><mi>μ</mi><mo>−</mo><msub><mi>b</mi><mi>u</mi></msub><mo>−</mo><msub><mi>b</mi><mi>i</mi></msub><mo>−</mo><msub><mi>p</mi><mi>u</mi></msub><mi mathvariant=\"normal\">.</mi><msub><mi>q</mi><mi>i</mi></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo>+</mo><mi>λ</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"normal\">∣</mi><mi mathvariant=\"normal\">∣</mi><msub><mi>p</mi><mi>u</mi></msub><mi mathvariant=\"normal\">∣</mi><msup><mi mathvariant=\"normal\">∣</mi><mn>2</mn></msup><mo>+</mo><mi mathvariant=\"normal\">∣</mi><mi mathvariant=\"normal\">∣</mi><msub><mi>q</mi><mi>i</mi></msub><mi mathvariant=\"normal\">∣</mi><msup><mi mathvariant=\"normal\">∣</mi><mn>2</mn></msup><mo>+</mo><msubsup><mi>b</mi><mi>u</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>b</mi><mi>i</mi><mn>2</mn></msubsup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">min_{p,q,b}\\Sigma_{u,i} (r_{ui}-\\mu-b_u-b_i-p_u . q_i)^2+\\lambda(||p_u||^2+||q_i||^2+b_u^2+b_i^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\">mi</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">q</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\">Σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">u</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">u</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">μ</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">u</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">u</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">.</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">λ</span><span class=\"mopen\">(</span><span class=\"mord\">∣∣</span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">u</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣∣</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0611em;vertical-align:-0.247em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-2.453em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">u</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0728em;vertical-align:-0.2587em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-2.4413em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2587em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span> </p>\n</div></div><p></p>\nwe're optimizing wrt <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mo separator=\"true\">,</mo><mi>q</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">p,q,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span>.\nThe loss is not convex, BUT if we fix <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">p,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span> we can optimize wrt <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>q</mi></mrow><annotation encoding=\"application/x-tex\">q</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span></span></span></span></span> with least squares.\nSame for fixing <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>q</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">q,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span> -<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span></span> and <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>q</mi><mo separator=\"true\">,</mo><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">q,p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span></span>, which means we can have a sequence of solving quadratic (and I think in this case, convext) problems.<p></p>\n<p> Advantages:\nmassive parallelization, as if we have only the <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mo separator=\"true\">,</mo><mi>q</mi></mrow><annotation encoding=\"application/x-tex\">p,q</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span></span></span></span></span> case, the objective function decomposes across variables!!!\nBut depends on the objective itself.</p>\n<h1 id=\"cold-start-problem\">Cold Start Problem<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#cold-start-problem\"></a></h1>\n<p>New (or unknown) users or  items.</p>\n<h2 id=\"new-item\">New Item<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#new-item\"></a></h2>\n<p> No historical interaction data.\nTypically use item data or baselines.</p>\n<ul>\n<li>Use item-item model, based on content (item-similarity for current item) <a title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\">^item-item-similarity (Private)</a></li>\n</ul>\n<h2 id=\"new-user\">New User<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#new-user\"></a></h2>\n<p>Unseen or anonusers - no profile or historical interactions. </p>\n<h3 id=\"user-user-model-based-on-demographic-characteristics\">User-user model, based on demographic characteristics<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#user-user-model-based-on-demographic-characteristics\"></a></h3>\n<h3 id=\"anonimous-users\">Anonimous Users<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#anonimous-users\"></a></h3>\n<p> If no profile, start showing items (Akinator-style)[https://en.akinator.com/] somehow and try to represent the user a s linear combination of the items seen.</p>\n<h2 id=\"no-collaborative-filtering\">No collaborative filtering<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#no-collaborative-filtering\"></a></h2>\n<p>Item-similarity\nContextual models for short-term history.</p>\n<h3 id=\"intra-session-models\">Intra-session models<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#intra-session-models\"></a></h3>\n<p>From <a href=\"https://youtu.be/y_TzOOCJqxI?t=1066\">this video</a>, we get a session-based recommendation\nusing such architecture:</p>\n<div class=\"mermaid\">\n  graph LR;\n\na[\"Input 1-hot encoding\"];\nb[\"Embedding Layer\"];\nc[\"GRU Layer\"];\nd[\"GRU Layer\"];\ne[\"GRU Layer\"];\nf[\"Feedforward layers\"];\ng[\"Output: scores on items\"];\n\na-->b-->c-->d-->e-->f-->g\nb-->d;\nb-->e;\nb-->f;\n</div>\n<p>uses <a href=\"/PublicPersonalKnowledgeBase/notes/OpdCi2T7nWRqHDhKARCDP\">Negative Sampling</a>,#minibatch.</p>\n<p><a title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\">science.stats.Regression.Metrics:^ranking-start:^ranking-end (Private)</a>: BPR, TOP1.</p>\n<h3 id=\"but-in-fact-neighborhood-based-methods-are-not-much-worse-if-done-properly\">But in fact neighborhood based Methods are not much worse if done properly<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#but-in-fact-neighborhood-based-methods-are-not-much-worse-if-done-properly\"></a></h3>\n<p><a href=\"https://web-ainf.aau.at/pub/jannach/files/Conference_RecSys_2017.pdf\">Debunk on the 20-30% of the last paragraph</a></p>\n<h2 id=\"representing-user-as-linear-combination-of-items\">Representing user as linear combination of items<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#representing-user-as-linear-combination-of-items\"></a></h2>\n<h1 id=\"discrepency-between-business-goal-metric-and-within-optimizer-loss\">Discrepency between 'business goal metric' and 'within-optimizer loss'<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#discrepency-between-business-goal-metric-and-within-optimizer-loss\"></a></h1>\n<p>Can have variety of final allocators.</p>\n<h1 id=\"fairness-\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^fairness\" href=\"#^fairness\"></a>Fairness <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#fairness-\"></a></h1>\n<p><a href=\"/PublicPersonalKnowledgeBase/notes/74afJvw5CEJWFWkDS8Ri0\">Algorithmic Fairness</a></p>\n<h2 id=\"error-is-same-across-groups\">Error is same across groups<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#error-is-same-across-groups\"></a></h2>\n<p></p><p></p><div class=\"portal-container\">\n<div class=\"portal-head\">\n<div class=\"portal-backlink\">\n<div class=\"portal-title\">From <span class=\"portal-text-title\">Algorithmic Fairness</span></div>\n<a href=\"/PublicPersonalKnowledgeBase/notes/74afJvw5CEJWFWkDS8Ri0\" class=\"portal-arrow\">Go to text <span class=\"right-arrow\">→</span></a>\n</div>\n</div>\n<div id=\"portal-parent-anchor\" class=\"portal-parent\" markdown=\"1\">\n<div class=\"portal-parent-fader-top\"></div>\n<div class=\"portal-parent-fader-bottom\"></div><p><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^independence-formula\" href=\"#^independence-formula\"></a><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi><mo stretchy=\"false\">(</mo><mi>R</mi><mo>=</mo><mi>r</mi><mi mathvariant=\"normal\">∣</mi><mi>A</mi><mo>=</mo><mi>a</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>P</mi><mo stretchy=\"false\">(</mo><mi>R</mi><mo>=</mo><mi>r</mi><mi mathvariant=\"normal\">∣</mi><mi>A</mi><mo>=</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mspace width=\"1em\"></mspace><mi mathvariant=\"normal\">∀</mi><mi>r</mi><mo>∈</mo><mi>R</mi><mspace width=\"1em\"></mspace><mi mathvariant=\"normal\">∀</mi><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo>∈</mo><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">{P(R=r|A=a)=P(R=r|A=b)\\quad \\forall r\\in R\\quad \\forall a,b\\in A}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">∣</span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\">∣</span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span></span></span> for <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span></span>-result, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span></span> -sensitive characteristic. </p>\n</div></div><p></p><p></p>\n<p>Can either model directly or just train algo and then test if erros same (ANOVA, t-test variations etc).</p>\n<h1 id=\"keeping-track-and-serving-of-multiple-models-model-versions-abcd-testingrollbacks\">Keeping Track and serving of multiple models, model versions, A/B/C/D... testing,rollbacks<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#keeping-track-and-serving-of-multiple-models-model-versions-abcd-testingrollbacks\"></a></h1>\n<h2 id=\"data-structure-for-multiple-models\">Data Structure for multiple models<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#data-structure-for-multiple-models\"></a></h2>\n<h2 id=\"abcd-testing\">A/B/C/D testing<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#abcd-testing\"></a></h2>\n<h2 id=\"model-rollback\">Model Rollback<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#model-rollback\"></a></h2>\n<h2 id=\"train-test-set-splitting\">Train-test set splitting<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#train-test-set-splitting\"></a></h2>\n<p>Probably similar to how we split data for testing in <a href=\"/PublicPersonalKnowledgeBase/notes/n2WACzfl7879utGwz2RVl\">Graph Neural Networks</a></p>\n<p></p><p></p><div class=\"portal-container\">\n<div class=\"portal-head\">\n<div class=\"portal-backlink\">\n<div class=\"portal-title\">From <span class=\"portal-text-title\">Train Test Splitting</span></div>\n<a href=\"/PublicPersonalKnowledgeBase/notes/6I2g5QI7rldW6fRaQrVsJ\" class=\"portal-arrow\">Go to text <span class=\"right-arrow\">→</span></a>\n</div>\n</div>\n<div id=\"portal-parent-anchor\" class=\"portal-parent\" markdown=\"1\">\n<div class=\"portal-parent-fader-top\"></div>\n<div class=\"portal-parent-fader-bottom\"></div><h1 id=\"recommender-system-test-set-split-\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^recsys-start\" href=\"#^recsys-start\"></a>Recommender System test set split <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#recommender-system-test-set-split-\"></a></h1>\n</div></div><p></p>\n<a href=\"/PublicPersonalKnowledgeBase/notes/6I2g5QI7rldW6fRaQrVsJ\">Train Test Splitting</a><p></p>\n<h1 id=\"moderation\">Moderation<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#moderation\"></a></h1>\n<p>Remove, reduce, inform approach.</p>\n<h2 id=\"remove\">Remove<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#remove\"></a></h2>\n<p>As users upload stuff, it's put in a <a href=\"/PublicPersonalKnowledgeBase/notes/XTtqgXn9cjxfiseCY7KSn\">Message Queues</a> and pool of workers\nis processing it for violation of Community standards, forbidden content, abuse, etc.\nIf confidence is high >99.5%, say, can directly remove.</p>\n<h2 id=\"reduce\">Reduce<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#reduce\"></a></h2>\n<p>Can send stuff above certain threshold for manual moderation. Can have buttons to report, etc,\ngain more feedback about it.\nThreats, etc.</p>\n<h2 id=\"inform\">Inform<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#inform\"></a></h2>\n<p>Can match clickbait titles, if we detect topic or semantics of a title/article, can check agains\n3rd party fact-checkers.</p>\n<h1 id=\"quick-filtering-tricks--\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^filters\" href=\"#^filters\"></a>Quick Filtering Tricks  <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#quick-filtering-tricks--\"></a></h1>\n<p>Some fast algorithms for deleting items for consideration for a certain query.</p>\n<h3 id=\"bloom-filters-for-deleting-forbidden-items\">Bloom Filters for deleting forbidden Items<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#bloom-filters-for-deleting-forbidden-items\"></a></h3>\n<p><a href=\"/PublicPersonalKnowledgeBase/notes/DGlamf8n85vZa7s6JE1TG#use-in-recommendation-systems\">Bloom Filters</a>\nUsage- mostly first-pass.</p>\n<h3 id=\"exclusion-of-too-similar-items-from-same-newsfeed\">Exclusion of 'too similar' items from same newsfeed<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#exclusion-of-too-similar-items-from-same-newsfeed\"></a></h3>\n<p>This looks vaguely like <a href=\"/PublicPersonalKnowledgeBase/notes/CPkp9LKmwAEjdjFjKUA9k\">Facility Location</a>, or\n<a href=\"/PublicPersonalKnowledgeBase/notes/8i2m6qqkBscsgEvhQWRxT\">Clustering</a> problem. Can, though, solve approximately by a greedy approach where we pick an item and remove from consideration items too similar to it, until correlation/cosine similarity is low enough, pick next item, etc. Always pick the next thing that's dissimilar enough from the previous ones.</p>\n<p>See also (Greedy 2-approximation for k-center)[https://ugtcs.berkeley.edu/src/approx-sp19/scribe-notes-2.pdf].</p>\n<p>Usage-mostly first pass.</p>\n<h1 id=\"privacy-and-gdpr\">Privacy and GDPR<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#privacy-and-gdpr\"></a></h1>\n<p></p><p></p><div class=\"portal-container\">\n<div class=\"portal-head\">\n<div class=\"portal-backlink\">\n<div class=\"portal-title\">From <span class=\"portal-text-title\">Algorithmic Privacy, Right to be Forgotten</span></div>\n<a href=\"/PublicPersonalKnowledgeBase/notes/t2Y26zj67xbb8TvJ4apR0\" class=\"portal-arrow\">Go to text <span class=\"right-arrow\">→</span></a>\n</div>\n</div>\n<div id=\"portal-parent-anchor\" class=\"portal-parent\" markdown=\"1\">\n<div class=\"portal-parent-fader-top\"></div>\n<div class=\"portal-parent-fader-bottom\"></div><h1 id=\"privacy-and-gdpr-\"><a aria-hidden=\"true\" class=\"block-anchor anchor-heading icon-link\" id=\"^gdpr\" href=\"#^gdpr\"></a>Privacy and GDPR <a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#privacy-and-gdpr-\"></a></h1>\n<p> E.g. in the context of <a href=\"/PublicPersonalKnowledgeBase/notes/VG6JMpj1Lic8br5iTSvIL\">Recommender Systems</a>, we could delete the user data and then use the cold start models</p>\n</div></div><p></p><p></p>\n<h1 id=\"model-serving\">Model Serving<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#model-serving\"></a></h1>\n<p>Tricky, thus the multi-step process.</p>\n<h1 id=\"future-directions\">Future Directions<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#future-directions\"></a></h1>\n<h1 id=\"improved-rnns--cold-starts-and-session-models\">Improved RNN's : cold starts and session models<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#improved-rnns--cold-starts-and-session-models\"></a></h1>\n<h1 id=\"curther-research-on-contextual-models-as-well-as-content-and-metadata\">curther research on contextual models, as well as content and metadata.<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#curther-research-on-contextual-models-as-well-as-content-and-metadata\"></a></h1>\n<h1 id=\"combining-sequence-and-historical-data-long-and-short-term-behavior\">Combining sequence and historical data (long and short term behavior)<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#combining-sequence-and-historical-data-long-and-short-term-behavior\"></a></h1>\n<hr>\n<strong>Backlinks</strong>\n<ul>\n<li><a href=\"/PublicPersonalKnowledgeBase/notes/JClhWanv6nT58jkwQvo3o\">AB Testing</a></li>\n<li><a href=\"/PublicPersonalKnowledgeBase/notes/GNXIZwCP8BdYPEsGMvUYO\">Youyube Video Recommendation</a></li>\n<li><a href=\"/PublicPersonalKnowledgeBase/notes/x6WJBarY2rinq6LZVpoAE\">KNN</a></li>\n</ul>","noteIndex":{"id":"wn8PE1RhG0znK1alrGFYv","title":"Root","desc":"","updated":1647507231129,"created":1631901573363,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"db285659ccac8b133c384de1ef51de66","links":[],"anchors":{"welcome-to-stefans-notes":{"type":"header","text":"Welcome to Stefan's Notes!","value":"welcome-to-stefans-notes","line":7,"column":0,"depth":1}},"children":["mxzxxu8z4e6krz99ht96y9d","W1EOZ27Tqx6RbiA2aW3DI","DyoLE2kwm9rRfRZhBGxPW","idhfogizmtcmvaamtalp3o3","4w8wBCSRvYUnGIZeozW03","vB321AipYCs6ldVC0APs9","h6WVdl1UTWVXeWuMJSZ1f","bth6m0exy9q9loxib1mc4al","4abAmH56ausbldEJbZokx","JyOFJ5NTPSVWMfiDy951X","0OO7fjCpcaGZg5qDRZr8z","138666663","pohXgII67dAxnoufG7yAP","6hs48bnjnaoxahk07exj74u","42r6290iqzLPmg9BY7fIp","3hoLerNJHjNkDziIKlFF2","T6meT3UNw0nRorEbzoPSl","hIOTXIIBj3vmhG1xc91lA","tnFlQuOAGPkbU2fZI7Cb1","Jb3w3f4x8kixLhrjUW6S1","LV6q5jlD2xtCF6yYFEqFC","ENDcCZFjAW9h66eDoFg7I","b5IeREnsTbeggC7rmWV0p","2hmbhdzcdljtdwln762gcrv","z9la6u9t3xueldj2omf2gc6","9akeo93l6b026jmu4t6e7pw","sc24o4jglr9jg29qr5v0e44","0mt5ao8tbbz3z5mdwe0aer8","r7rvb6nal69nfb6ogqdadnm","xujx5iuxskj10o0ajpi109n","lyl1rzqz6zwcswpwh0kafrm","skpw697vlqdq3t3uqxpq5e3","a4tts3oc3oms7wuralrbzdc","13a1ufqh6o8yi9evw1u5kv5"],"parent":null,"data":{},"body":"# Welcome to Stefan's Notes!\n\n        \n\nLast updated: 2021.12.30\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"enableUserTags":true,"enableHashTags":true,"dendronVersion":"0.95.0","enableEditorDecorations":true,"enableFullHierarchyNoteTitle":false,"templateHierarchy":"template"},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dendron","description":"Personal knowledge space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","assetsPrefix":"/PublicPersonalKnowledgeBase","siteUrl":"https://petrovs12.github.io","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"theme":"light","templateVersion":"0.97.0","siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}