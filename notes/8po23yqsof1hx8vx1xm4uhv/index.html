<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/PublicPersonalKnowledgeBase/favicon.ico"/><title>KATS</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal knowledge space"/><meta property="og:title" content="KATS"/><meta property="og:description" content="Personal knowledge space"/><meta property="og:url" content="https://petrovs12.github.io/PublicPersonalKnowledgeBase/notes/8po23yqsof1hx8vx1xm4uhv/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="7/13/2022"/><meta property="article:modified_time" content="7/14/2022"/><link rel="canonical" href="https://petrovs12.github.io/PublicPersonalKnowledgeBase/notes/8po23yqsof1hx8vx1xm4uhv/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/PublicPersonalKnowledgeBase/_next/static/css/7719b08cc3352912.css" as="style"/><link rel="stylesheet" href="/PublicPersonalKnowledgeBase/_next/static/css/7719b08cc3352912.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/PublicPersonalKnowledgeBase/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/PublicPersonalKnowledgeBase/_next/static/chunks/webpack-b320c149a25b986a.js" defer=""></script><script src="/PublicPersonalKnowledgeBase/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/PublicPersonalKnowledgeBase/_next/static/chunks/main-8915ee191b7710e8.js" defer=""></script><script src="/PublicPersonalKnowledgeBase/_next/static/chunks/pages/_app-bf98b80149ea852b.js" defer=""></script><script src="/PublicPersonalKnowledgeBase/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/PublicPersonalKnowledgeBase/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/PublicPersonalKnowledgeBase/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/PublicPersonalKnowledgeBase/_next/static/d47oHCd-7QAOR5IvSuJke/_buildManifest.js" defer=""></script><script src="/PublicPersonalKnowledgeBase/_next/static/d47oHCd-7QAOR5IvSuJke/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="kats">KATS<a aria-hidden="true" class="anchor-heading icon-link" href="#kats"></a></h1>
<h1 id="timeseriesdata--obbject">TimeSeriesData  obbject<a aria-hidden="true" class="anchor-heading icon-link" href="#timeseriesdata--obbject"></a></h1>
<p>like ts in R, or mts in R.
just a pandas dataframe with some additional stuff. </p>
<p>Can convert from and to a pandas DF</p>
<h1 id="forecasting-with-kats">Forecasting with KATS<a aria-hidden="true" class="anchor-heading icon-link" href="#forecasting-with-kats"></a></h1>
<p>10 Basic forecasting models</p>
<ol>
<li>Linear</li>
<li>Quadratic</li>
<li>ARIMA</li>
<li>SARIMA</li>
<li>Holt-Winters</li>
<li>Prophet</li>
<li>AR-Net</li>
<li>LSTM</li>
<li>Theta</li>
<li>VAR</li>
</ol>
<p>  -- Not obvious how to do
k-step ahead out of sample predictions with KATS.</p>
<h1 id="httpsfacebookresearchgithubiokatsapi_moduleskatsmodelslstmhtmllstmmodelpredict"><a href="https://facebookresearch.github.io/Kats/api/_modules/kats/models/lstm.html#LSTMModel.predict">https://facebookresearch.github.io/Kats/api/_modules/kats/models/lstm.html#LSTMModel.predict</a><a aria-hidden="true" class="anchor-heading icon-link" href="#httpsfacebookresearchgithubiokatsapi_moduleskatsmodelslstmhtmllstmmodelpredict"></a></h1>
<p>However, BackTester is a way to do this...</p>
<h1 id="kats-backtestershttpsfacebookresearchgithubiokatsapikatsutilsbacktestershtml">(KATS Backtesters)[https://facebookresearch.github.io/Kats/api/kats.utils.backtesters.html]<a aria-hidden="true" class="anchor-heading icon-link" href="#kats-backtestershttpsfacebookresearchgithubiokatsapikatsutilsbacktestershtml"></a></h1>
<p>The <strong>frequency</strong> parameter is usually in the 'fit' function.</p>
<p>Probably kwargs in the Backtest model are passed to the 'fit' model, or maybe the 'predict' function.</p>
<p>Actually kwargs is just passed to the parent class constructor.</p>
<p> I think it's pased to both, maybe...</p>
<h1 id="inferring-frequency">Inferring frequency<a aria-hidden="true" class="anchor-heading icon-link" href="#inferring-frequency"></a></h1>
<p> Kats uses <a href="/PublicPersonalKnowledgeBase/">pandas infer freq function</a>
<a href="https://pandas.pydata.org/docs/reference/api/pandas.infer_freq.html">https://pandas.pydata.org/docs/reference/api/pandas.infer_freq.html</a></p>
<h1 id="nb--use-cross-validation">NB : Use Cross Validation<a aria-hidden="true" class="anchor-heading icon-link" href="#nb--use-cross-validation"></a></h1>
<p>rolling vs expanding window, etc...</p>
<h1 id="kats---out-of-sample-step-ahead-forecasting">KATS - out of sample step-ahead forecasting<a aria-hidden="true" class="anchor-heading icon-link" href="#kats---out-of-sample-step-ahead-forecasting"></a></h1>
<p><a href="https://facebookresearch.github.io/Kats/api/kats.models.arima.html">https://facebookresearch.github.io/Kats/api/kats.models.arima.html</a></p>
<p>Here inthe arima, there are <strong>start_params</strong>, and iteration limit...</p>
<h1 id="kats-prophet">KATS Prophet<a aria-hidden="true" class="anchor-heading icon-link" href="#kats-prophet"></a></h1>
<p>In the ProphetParams, there is somethign about holidays...</p>
<p>There is a <a href="/PublicPersonalKnowledgeBase/httpshttps://github.com/facebookresearch/Kats/pull/129">PR request</a> for this..</p>
<p>From <a href="https://bytemeta.vip/repo/facebookresearch/Kats/issues/167">here</a></p>
<pre class="language-{python}"><code class="language-{python}">from kats.models.prophet import ProphetModel, ProphetParams

air_passengers_ts = TimeSeriesData(air_passengers_df) reg = np.random.randn(len(air_passengers_ts))

pparams = ProphetParams(extra_regressors = [{'value': reg, 'name':'reg1'}])

pmodel = ProphetModel(data=air_passengers_ts, params=pparams)

pmodel.fit()

pmodel.predict(steps=20, extra_regressors = [{'value': np.random.randn(20), 'name':'reg1'}])`
</code></pre>
<h1 id="low-hanging-fruit">Low-hanging fruit..<a aria-hidden="true" class="anchor-heading icon-link" href="#low-hanging-fruit"></a></h1>
<h2 id="general">General<a aria-hidden="true" class="anchor-heading icon-link" href="#general"></a></h2>
<ol start="0">
<li>Use log1p -> exp(x)-1  to avoid predictions bellow 0...</li>
<li>Featurization:
Use Patrons forecast as a feature in a regression/auto-regressive model
Moving averages over different time windows:
Previous 3 working days, mean and median for last week month, quarter, same quarter last year, a same week last year (if available).
1/ (#days after last holiday). #days since the start of the semester and until the end of the semester.</li>
</ol>
<h1 id="of-days-since-the-start-of-last-lockdown">of days since the start of last lockdown.<a aria-hidden="true" class="anchor-heading icon-link" href="#of-days-since-the-start-of-last-lockdown"></a></h1>
<p>Using patrons forecast for that date (as a version of a model stacking).</p>
<p> -- Observation weights not included in Prophet At the moment</p>
<ul>
<li>Use Arima as Baseline model</li>
</ul>
<h1 id="solving-the-bad-observational-periods-issue">Solving the 'bad observational periods' issue<a aria-hidden="true" class="anchor-heading icon-link" href="#solving-the-bad-observational-periods-issue"></a></h1>
<ol>
<li>for each time series, fit <a href="https://scikit-learn.org/stable/modules/mixture.html">Gaussian Mixture model</a> to check for 'abnormal periods'. Alternatively, they may be defined manually.</li>
<li>For each time series, mark the 'abnormal' periods that have mean &#x3C;=1/3 of the mean of the cluster of largest values, as missing/NaN.</li>
<li>Inpute the NaN's with <a href="https://pypi.org/project/autoimpute/">https://pypi.org/project/autoimpute/</a>, spline feature.</li>
</ol>
<h2 id="event-and-holiday-modeling">Event and Holiday Modeling<a aria-hidden="true" class="anchor-heading icon-link" href="#event-and-holiday-modeling"></a></h2>
<p>Add events. For the prophet model, can do it directly in the prophet constructor.</p>
<h2 id="external-regressors-w-lstm">External regressors w/ LSTM<a aria-hidden="true" class="anchor-heading icon-link" href="#external-regressors-w-lstm"></a></h2>
<p>Add external regressors as an extension of the input vectors...
Should be easy to also add the the out of sample several-steps ahead things.</p>
<h2 id="split-and-aggregate">Split and aggregate<a aria-hidden="true" class="anchor-heading icon-link" href="#split-and-aggregate"></a></h2>
<p>Notes from
<a href="https://towardsdatascience.com/the-best-deep-learning-models-for-time-series-forecasting-690767bc63f0">Best DL Learning MNodels for TS</a></p>
<p>there is an implementation of N-Beats in darts</p>
<p><a href="https://github.com/QData/spacetimeformer">https://github.com/QData/spacetimeformer</a></p></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#timeseriesdata--obbject" title="TimeSeriesData  obbject">TimeSeriesData  obbject</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#forecasting-with-kats" title="Forecasting with KATS">Forecasting with KATS</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#httpsfacebookresearchgithubiokatsapi_moduleskatsmodelslstmhtmllstmmodelpredict" title="https://facebookresearch.github.io/Kats/api/_modules/kats/models/lstm.html#LSTMModel.predict">https://facebookresearch.github.io/Kats/api/_modules/kats/models/lstm.html#LSTMModel.predict</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#kats-backtestershttpsfacebookresearchgithubiokatsapikatsutilsbacktestershtml" title="(KATS Backtesters)https://facebookresearch.github.io/Kats/api/kats.utils.backtesters.html">(KATS Backtesters)https://facebookresearch.github.io/Kats/api/kats.utils.backtesters.html</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#inferring-frequency" title="Inferring frequency">Inferring frequency</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#nb--use-cross-validation" title="NB : Use Cross Validation">NB : Use Cross Validation</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#kats---out-of-sample-step-ahead-forecasting" title="KATS - out of sample step-ahead forecasting">KATS - out of sample step-ahead forecasting</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#kats-prophet" title="KATS Prophet">KATS Prophet</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#low-hanging-fruit" title="Low-hanging fruit..">Low-hanging fruit..</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#general" title="General">General</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#of-days-since-the-start-of-last-lockdown" title="of days since the start of last lockdown.">of days since the start of last lockdown.</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#solving-the-bad-observational-periods-issue" title="Solving the &#x27;bad observational periods&#x27; issue">Solving the &#x27;bad observational periods&#x27; issue</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#event-and-holiday-modeling" title="Event and Holiday Modeling">Event and Holiday Modeling</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#external-regressors-w-lstm" title="External regressors w/ LSTM">External regressors w/ LSTM</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#split-and-aggregate" title="Split and aggregate">Split and aggregate</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"8po23yqsof1hx8vx1xm4uhv","title":"KATS","desc":"","updated":1657781188540,"created":1657742582796,"custom":{},"fname":"science.stats.Time Series.KATS","type":"note","vault":{"fsPath":"vault"},"contentHash":"a561a816e04320f243747177fe2e1e4d","links":[],"anchors":{"timeseriesdata--obbject":{"type":"header","text":"TimeSeriesData  obbject","value":"timeseriesdata--obbject","line":9,"column":0,"depth":1},"forecasting-with-kats":{"type":"header","text":"Forecasting with KATS","value":"forecasting-with-kats","line":16,"column":0,"depth":1},"httpsfacebookresearchgithubiokatsapi_moduleskatsmodelslstmhtmllstmmodelpredict":{"type":"header","text":"https://facebookresearch.github.io/Kats/api/_modules/kats/models/lstm.html#LSTMModel.predict","value":"httpsfacebookresearchgithubiokatsapi_moduleskatsmodelslstmhtmllstmmodelpredict","line":35,"column":0,"depth":1},"kats-backtestershttpsfacebookresearchgithubiokatsapikatsutilsbacktestershtml":{"type":"header","text":"(KATS Backtesters)https://facebookresearch.github.io/Kats/api/kats.utils.backtesters.html","value":"kats-backtestershttpsfacebookresearchgithubiokatsapikatsutilsbacktestershtml","line":41,"column":0,"depth":1},"inferring-frequency":{"type":"header","text":"Inferring frequency","value":"inferring-frequency","line":52,"column":0,"depth":1},"nb--use-cross-validation":{"type":"header","text":"NB : Use Cross Validation","value":"nb--use-cross-validation","line":58,"column":0,"depth":1},"kats---out-of-sample-step-ahead-forecasting":{"type":"header","text":"KATS - out of sample step-ahead forecasting","value":"kats---out-of-sample-step-ahead-forecasting","line":63,"column":0,"depth":1},"kats-prophet":{"type":"header","text":"KATS Prophet","value":"kats-prophet","line":71,"column":0,"depth":1},"low-hanging-fruit":{"type":"header","text":"Low-hanging fruit..","value":"low-hanging-fruit","line":97,"column":0,"depth":1},"general":{"type":"header","text":"General","value":"general","line":101,"column":0,"depth":2},"of-days-since-the-start-of-last-lockdown":{"type":"header","text":"of days since the start of last lockdown.","value":"of-days-since-the-start-of-last-lockdown","line":108,"column":0,"depth":1},"solving-the-bad-observational-periods-issue":{"type":"header","text":"Solving the 'bad observational periods' issue","value":"solving-the-bad-observational-periods-issue","line":116,"column":0,"depth":1},"event-and-holiday-modeling":{"type":"header","text":"Event and Holiday Modeling","value":"event-and-holiday-modeling","line":123,"column":0,"depth":2},"external-regressors-w-lstm":{"type":"header","text":"External regressors w/ LSTM","value":"external-regressors-w-lstm","line":126,"column":0,"depth":2},"split-and-aggregate":{"type":"header","text":"Split and aggregate","value":"split-and-aggregate","line":131,"column":0,"depth":2}},"children":[],"parent":"9g50kaYv8jpHHgyrpKHyF","data":{}},"body":"\u003ch1 id=\"kats\"\u003eKATS\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#kats\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003ch1 id=\"timeseriesdata--obbject\"\u003eTimeSeriesData  obbject\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#timeseriesdata--obbject\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003elike ts in R, or mts in R.\njust a pandas dataframe with some additional stuff. \u003c/p\u003e\n\u003cp\u003eCan convert from and to a pandas DF\u003c/p\u003e\n\u003ch1 id=\"forecasting-with-kats\"\u003eForecasting with KATS\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#forecasting-with-kats\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003e10 Basic forecasting models\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eLinear\u003c/li\u003e\n\u003cli\u003eQuadratic\u003c/li\u003e\n\u003cli\u003eARIMA\u003c/li\u003e\n\u003cli\u003eSARIMA\u003c/li\u003e\n\u003cli\u003eHolt-Winters\u003c/li\u003e\n\u003cli\u003eProphet\u003c/li\u003e\n\u003cli\u003eAR-Net\u003c/li\u003e\n\u003cli\u003eLSTM\u003c/li\u003e\n\u003cli\u003eTheta\u003c/li\u003e\n\u003cli\u003eVAR\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e  -- Not obvious how to do\nk-step ahead out of sample predictions with KATS.\u003c/p\u003e\n\u003ch1 id=\"httpsfacebookresearchgithubiokatsapi_moduleskatsmodelslstmhtmllstmmodelpredict\"\u003e\u003ca href=\"https://facebookresearch.github.io/Kats/api/_modules/kats/models/lstm.html#LSTMModel.predict\"\u003ehttps://facebookresearch.github.io/Kats/api/_modules/kats/models/lstm.html#LSTMModel.predict\u003c/a\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#httpsfacebookresearchgithubiokatsapi_moduleskatsmodelslstmhtmllstmmodelpredict\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003eHowever, BackTester is a way to do this...\u003c/p\u003e\n\u003ch1 id=\"kats-backtestershttpsfacebookresearchgithubiokatsapikatsutilsbacktestershtml\"\u003e(KATS Backtesters)[https://facebookresearch.github.io/Kats/api/kats.utils.backtesters.html]\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#kats-backtestershttpsfacebookresearchgithubiokatsapikatsutilsbacktestershtml\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003eThe \u003cstrong\u003efrequency\u003c/strong\u003e parameter is usually in the 'fit' function.\u003c/p\u003e\n\u003cp\u003eProbably kwargs in the Backtest model are passed to the 'fit' model, or maybe the 'predict' function.\u003c/p\u003e\n\u003cp\u003eActually kwargs is just passed to the parent class constructor.\u003c/p\u003e\n\u003cp\u003e I think it's pased to both, maybe...\u003c/p\u003e\n\u003ch1 id=\"inferring-frequency\"\u003eInferring frequency\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#inferring-frequency\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003e Kats uses \u003ca href=\"/PublicPersonalKnowledgeBase/\"\u003epandas infer freq function\u003c/a\u003e\n\u003ca href=\"https://pandas.pydata.org/docs/reference/api/pandas.infer_freq.html\"\u003ehttps://pandas.pydata.org/docs/reference/api/pandas.infer_freq.html\u003c/a\u003e\u003c/p\u003e\n\u003ch1 id=\"nb--use-cross-validation\"\u003eNB : Use Cross Validation\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#nb--use-cross-validation\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003erolling vs expanding window, etc...\u003c/p\u003e\n\u003ch1 id=\"kats---out-of-sample-step-ahead-forecasting\"\u003eKATS - out of sample step-ahead forecasting\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#kats---out-of-sample-step-ahead-forecasting\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003e\u003ca href=\"https://facebookresearch.github.io/Kats/api/kats.models.arima.html\"\u003ehttps://facebookresearch.github.io/Kats/api/kats.models.arima.html\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eHere inthe arima, there are \u003cstrong\u003estart_params\u003c/strong\u003e, and iteration limit...\u003c/p\u003e\n\u003ch1 id=\"kats-prophet\"\u003eKATS Prophet\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#kats-prophet\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003eIn the ProphetParams, there is somethign about holidays...\u003c/p\u003e\n\u003cp\u003eThere is a \u003ca href=\"/PublicPersonalKnowledgeBase/httpshttps://github.com/facebookresearch/Kats/pull/129\"\u003ePR request\u003c/a\u003e for this..\u003c/p\u003e\n\u003cp\u003eFrom \u003ca href=\"https://bytemeta.vip/repo/facebookresearch/Kats/issues/167\"\u003ehere\u003c/a\u003e\u003c/p\u003e\n\u003cpre class=\"language-{python}\"\u003e\u003ccode class=\"language-{python}\"\u003efrom kats.models.prophet import ProphetModel, ProphetParams\n\nair_passengers_ts = TimeSeriesData(air_passengers_df) reg = np.random.randn(len(air_passengers_ts))\n\npparams = ProphetParams(extra_regressors = [{'value': reg, 'name':'reg1'}])\n\npmodel = ProphetModel(data=air_passengers_ts, params=pparams)\n\npmodel.fit()\n\npmodel.predict(steps=20, extra_regressors = [{'value': np.random.randn(20), 'name':'reg1'}])`\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1 id=\"low-hanging-fruit\"\u003eLow-hanging fruit..\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#low-hanging-fruit\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003ch2 id=\"general\"\u003eGeneral\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#general\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003col start=\"0\"\u003e\n\u003cli\u003eUse log1p -\u003e exp(x)-1  to avoid predictions bellow 0...\u003c/li\u003e\n\u003cli\u003eFeaturization:\nUse Patrons forecast as a feature in a regression/auto-regressive model\nMoving averages over different time windows:\nPrevious 3 working days, mean and median for last week month, quarter, same quarter last year, a same week last year (if available).\n1/ (#days after last holiday). #days since the start of the semester and until the end of the semester.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1 id=\"of-days-since-the-start-of-last-lockdown\"\u003eof days since the start of last lockdown.\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#of-days-since-the-start-of-last-lockdown\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003eUsing patrons forecast for that date (as a version of a model stacking).\u003c/p\u003e\n\u003cp\u003e -- Observation weights not included in Prophet At the moment\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eUse Arima as Baseline model\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"solving-the-bad-observational-periods-issue\"\u003eSolving the 'bad observational periods' issue\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#solving-the-bad-observational-periods-issue\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003col\u003e\n\u003cli\u003efor each time series, fit \u003ca href=\"https://scikit-learn.org/stable/modules/mixture.html\"\u003eGaussian Mixture model\u003c/a\u003e to check for 'abnormal periods'. Alternatively, they may be defined manually.\u003c/li\u003e\n\u003cli\u003eFor each time series, mark the 'abnormal' periods that have mean \u0026#x3C;=1/3 of the mean of the cluster of largest values, as missing/NaN.\u003c/li\u003e\n\u003cli\u003eInpute the NaN's with \u003ca href=\"https://pypi.org/project/autoimpute/\"\u003ehttps://pypi.org/project/autoimpute/\u003c/a\u003e, spline feature.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"event-and-holiday-modeling\"\u003eEvent and Holiday Modeling\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#event-and-holiday-modeling\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eAdd events. For the prophet model, can do it directly in the prophet constructor.\u003c/p\u003e\n\u003ch2 id=\"external-regressors-w-lstm\"\u003eExternal regressors w/ LSTM\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#external-regressors-w-lstm\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eAdd external regressors as an extension of the input vectors...\nShould be easy to also add the the out of sample several-steps ahead things.\u003c/p\u003e\n\u003ch2 id=\"split-and-aggregate\"\u003eSplit and aggregate\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#split-and-aggregate\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eNotes from\n\u003ca href=\"https://towardsdatascience.com/the-best-deep-learning-models-for-time-series-forecasting-690767bc63f0\"\u003eBest DL Learning MNodels for TS\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003ethere is an implementation of N-Beats in darts\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/QData/spacetimeformer\"\u003ehttps://github.com/QData/spacetimeformer\u003c/a\u003e\u003c/p\u003e","noteIndex":{"id":"wn8PE1RhG0znK1alrGFYv","title":"Root","desc":"","updated":1647507231129,"created":1631901573363,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"db285659ccac8b133c384de1ef51de66","links":[],"anchors":{"welcome-to-stefans-notes":{"type":"header","text":"Welcome to Stefan's Notes!","value":"welcome-to-stefans-notes","line":7,"column":0,"depth":1}},"children":["mxzxxu8z4e6krz99ht96y9d","W1EOZ27Tqx6RbiA2aW3DI","DyoLE2kwm9rRfRZhBGxPW","idhfogizmtcmvaamtalp3o3","4w8wBCSRvYUnGIZeozW03","vB321AipYCs6ldVC0APs9","h6WVdl1UTWVXeWuMJSZ1f","bth6m0exy9q9loxib1mc4al","4abAmH56ausbldEJbZokx","JyOFJ5NTPSVWMfiDy951X","0OO7fjCpcaGZg5qDRZr8z","138666663","pohXgII67dAxnoufG7yAP","6hs48bnjnaoxahk07exj74u","42r6290iqzLPmg9BY7fIp","3hoLerNJHjNkDziIKlFF2","T6meT3UNw0nRorEbzoPSl","hIOTXIIBj3vmhG1xc91lA","tnFlQuOAGPkbU2fZI7Cb1","Jb3w3f4x8kixLhrjUW6S1","LV6q5jlD2xtCF6yYFEqFC","ENDcCZFjAW9h66eDoFg7I","b5IeREnsTbeggC7rmWV0p","2hmbhdzcdljtdwln762gcrv","z9la6u9t3xueldj2omf2gc6","9akeo93l6b026jmu4t6e7pw","sc24o4jglr9jg29qr5v0e44","0mt5ao8tbbz3z5mdwe0aer8","r7rvb6nal69nfb6ogqdadnm","xujx5iuxskj10o0ajpi109n","lyl1rzqz6zwcswpwh0kafrm","skpw697vlqdq3t3uqxpq5e3","a4tts3oc3oms7wuralrbzdc","13a1ufqh6o8yi9evw1u5kv5"],"parent":null,"data":{},"body":"# Welcome to Stefan's Notes!\n\n        \n\nLast updated: 2021.12.30\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"enableUserTags":true,"enableHashTags":true,"dendronVersion":"0.95.0","enableEditorDecorations":true,"enableFullHierarchyNoteTitle":false,"templateHierarchy":"template"},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dendron","description":"Personal knowledge space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","assetsPrefix":"/PublicPersonalKnowledgeBase","siteUrl":"https://petrovs12.github.io","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"theme":"light","templateVersion":"0.97.0","siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"8po23yqsof1hx8vx1xm4uhv"},"buildId":"d47oHCd-7QAOR5IvSuJke","assetPrefix":"/PublicPersonalKnowledgeBase","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>