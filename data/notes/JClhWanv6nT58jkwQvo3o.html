<h1 id="ab-testing">AB Testing<a aria-hidden="true" class="anchor-heading icon-link" href="#ab-testing"></a></h1>
<p>From <a href="https://www.youtube.com/watch?v=X8u6kr4fxXc&#x26;ab_channel=DataInterviewPro">DataInterviewPro</a></p>
<h1 id="ab-testing-or-experimental-design">A/B Testing or Experimental Design<a aria-hidden="true" class="anchor-heading icon-link" href="#ab-testing-or-experimental-design"></a></h1>
<p>Controlled experiments (e.g. clinical trials).</p>
<p>Usually when we run experiments, we want to see difference in certain <a href="/PublicPersonalKnowledgeBase/notes/kWzR0yolsu5D1FBzQDiZE">User Based Metrics (Digital Products)</a>, e.g. </p><p></p><div class="portal-container">
<div class="portal-head">
<div class="portal-backlink">
<div class="portal-title">From <span class="portal-text-title">User Based Metrics (Digital Products)</span></div>
<a href="/PublicPersonalKnowledgeBase/notes/kWzR0yolsu5D1FBzQDiZE" class="portal-arrow">Go to text <span class="right-arrow">→</span></a>
</div>
</div>
<div id="portal-parent-anchor" class="portal-parent" markdown="1">
<div class="portal-parent-fader-top"></div>
<div class="portal-parent-fader-bottom"></div><h1 id="active-users-"><a aria-hidden="true" class="block-anchor anchor-heading icon-link" id="^active-users" href="#^active-users"></a>Active Users <a aria-hidden="true" class="anchor-heading icon-link" href="#active-users-"></a></h1>
</div></div><p></p>.<p></p>
<p></p><p></p><div class="portal-container">
<div class="portal-head">
<div class="portal-backlink">
<div class="portal-title">From <span class="portal-text-title">Tests</span></div>
<a href="/PublicPersonalKnowledgeBase/notes/uxwwYYzCji7ljiWWT4zif" class="portal-arrow">Go to text <span class="right-arrow">→</span></a>
</div>
</div>
<div id="portal-parent-anchor" class="portal-parent" markdown="1">
<div class="portal-parent-fader-top"></div>
<div class="portal-parent-fader-bottom"></div><h2 id="t-test-"><a aria-hidden="true" class="block-anchor anchor-heading icon-link" id="^ttest" href="#^ttest"></a>t-test <a aria-hidden="true" class="anchor-heading icon-link" href="#t-test-"></a></h2>
</div></div><p></p> can be used in the simplest case, or some bayesian setup. <p></p>
<p>Type II error (or power). Power = 1 - Type II error.
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><msub><mi>e</mi><mi>s</mi></msub><mi>i</mi><mi>z</mi><mi>e</mi><mo>≈</mo><mfrac><mrow><mn>16</mn><msup><mi>σ</mi><mn>2</mn></msup></mrow><msup><mi>τ</mi><mn>2</mn></msup></mfrac></mrow><annotation encoding="application/x-tex">sample_size \approx \frac{16\sigma^2}{\tau^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">am</span><span class="mord mathnormal" style="margin-right:0.01968em;">pl</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">i</span><span class="mord mathnormal">ze</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3629em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0179em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.1132em;">τ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">16</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span> where <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>τ</mi></mrow><annotation encoding="application/x-tex">\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span></span></span></span></span> is the effect size (difference in the metric chosen between the control and treatment group).</p>
<p>As we don't know <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>τ</mi></mrow><annotation encoding="application/x-tex">\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span></span></span></span></span>, we can choose the <strong>minimal detectable effect size</strong>, equal to the minimal business-relevant effect size, i.e. the min effect that would justify a switch. </p>
<p>Normally <strong>decided by stakeholders</strong>.</p>
<h1 id="multiple-testing-problems">Multiple Testing Problems<a aria-hidden="true" class="anchor-heading icon-link" href="#multiple-testing-problems"></a></h1>
<p>Bayesian setup, Bonferroni correction, or something else.</p>
<p>Bonferroni correction:
divide significance level by the number of tests.</p>
<p>But sometimes too conservative, i.e. lower recall</p>
<p>Or can control <strong>False Discovery Rate</strong>.</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mi>D</mi><mi>R</mi><mo>=</mo><mi>E</mi><mo stretchy="false">[</mo><mfrac><mrow><mi>f</mi><mi>a</mi><mi>l</mi><mi>s</mi><mi>e</mi><mi>P</mi><mi>o</mi><mi>s</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>e</mi><mi>s</mi></mrow><mrow><mi>r</mi><mi>e</mi><mi>j</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>s</mi><mi>n</mi></mrow></mfrac><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">FDR = E[\frac{falsePositives}{rejectiosn}]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.4133em;vertical-align:-0.4811em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mopen">[</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9322em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">re</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mord mathnormal mtight">ec</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">os</span><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="mord mathnormal mtight">os</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="mord mathnormal mtight">es</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">]</span></span></span></span></span>.
This can be calculated, then choose a threshold for FDR, etc.</p>
<p>In a decision-making setup, can optimize the above...</p>
<h1 id="novelty-and-primacy-effect">Novelty and Primacy Effect<a aria-hidden="true" class="anchor-heading icon-link" href="#novelty-and-primacy-effect"></a></h1>
<p>User behavior can either be resistent to change, or welcoming it, and we don't know apriori.
If the effect is initially large up/down and then gets closer to the baseline, this is the novelty/primacy effect.</p>
<h2 id="run-longer">Run Longer<a aria-hidden="true" class="anchor-heading icon-link" href="#run-longer"></a></h2>
<h2 id="use-only-new-users-or-equivalent-type-matching">Use Only New Users (or equivalent type matching)<a aria-hidden="true" class="anchor-heading icon-link" href="#use-only-new-users-or-equivalent-type-matching"></a></h2>
<p>Can fix by running experiments on new users, or having the baseline be the behavior or new users when they were new, etc. In the latter case should maybe control for seasonality or other temporal effects as appropriate.</p>
<h1 id="interference-between-variants">Interference between variants<a aria-hidden="true" class="anchor-heading icon-link" href="#interference-between-variants"></a></h1>
<p> Happens most often when control and treatment groups interact somehow.
If they interact like a 'standard' network effect (not competing for resources), we expect the actual effect to be larger than during the test.
<strong>Example</strong> FB posts promote more posts, so if small increase in population, will get larger.
<a href="/PublicPersonalKnowledgeBase/notes/blmK8d7FlDN7PJsOjXrgb">Agent Based Models</a>
</p><p></p><div class="portal-container">
<div class="portal-head">
<div class="portal-backlink">
<div class="portal-title">From <span class="portal-text-title">Agent Based Models</span></div>
<a href="/PublicPersonalKnowledgeBase/notes/blmK8d7FlDN7PJsOjXrgb" class="portal-arrow">Go to text <span class="right-arrow">→</span></a>
</div>
</div>
<div id="portal-parent-anchor" class="portal-parent" markdown="1">
<div class="portal-parent-fader-top"></div>
<div class="portal-parent-fader-bottom"></div><h2 id="facebook-network-effect-"><a aria-hidden="true" class="block-anchor anchor-heading icon-link" id="^fbepidemology" href="#^fbepidemology"></a>Facebook Network Effect <a aria-hidden="true" class="anchor-heading icon-link" href="#facebook-network-effect-"></a></h2>
</div></div><p></p><p></p>
<p> If 2-sided market, control and treatment groups compete for same resource. If we give better 'weapon' for treatment, after launch it would disappear, as everyone has better "weapon".
<strong>Example</strong> Better matching algo for Uber drivers. (or in the extreme case, prioritize some drivers over others- obviously the treatment group is more priviliged).</p>
<h2 id="isolation-of-effect">Isolation of effect<a aria-hidden="true" class="anchor-heading icon-link" href="#isolation-of-effect"></a></h2>
<p>Test between "connected components", e.g. New York vs LA (approximately, of course). Also can do temporally etc.
Simplest is geographical splits.</p>
<p>In social network:
test on differennt 'clusters' of people.</p>
<p><strong>Ego-network randomization</strong>. A more scalable variation of the above.</p>
<h1 id="ab-testing-for-ranking">AB testing for <a href="/PublicPersonalKnowledgeBase/notes/vwq8gz35bn108o7bhkne1oq">Ranking</a><a aria-hidden="true" class="anchor-heading icon-link" href="#ab-testing-for-ranking"></a></h1>
<p><a href="/PublicPersonalKnowledgeBase/notes/QE1BddXlccbyYN1avaB4M">Recommender Systems</a></p>
<p>Please also see <a href="/PublicPersonalKnowledgeBase/notes/pBIMmRuN5zKHlVDIWn2wt#^ranking-start">Loss Functions</a>.</p>
<p>Comparing two rankings via clicks.
Say 2 algorithms give 2 rankings, Ranking A, ranking B.
Merge-sort-remove-duplicates interleaving the rankings.
Assign first element randomly.
Count clicks from A and B. Better one will on average get more rankings.</p>
<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/PublicPersonalKnowledgeBase/notes/XIkHzTaTzXowP2s1JUHyZ">MLOps</a></li>
</ul>